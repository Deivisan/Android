# ============================================================
# ğŸš€ DevSan ZSH Configuration - Termux Edition  
# ============================================================

if [ -f "$HOME/.oh-my-zsh/oh-my-zsh.sh" ]; then
    export ZSH="$HOME/.oh-my-zsh"
    ZSH_THEME="robbyrussell"
    plugins=(git python npm zsh-syntax-highlighting zsh-autosuggestions)
    source $ZSH/oh-my-zsh.sh 2>/dev/null
fi

if [ -f "${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh" ]; then
    source ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
fi
if [ -f "${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh" ]; then
    source ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh
fi

exibir_deivitech() {
    if [ -z "$DEIVITECH_EXIBIDO" ]; then
        CURRENT_IP=$(ifconfig wlan0 2>/dev/null | grep "inet " | awk '{print $2}' || echo "N/A")

        if pgrep -f "qwen-code" >/dev/null; then
            QWEN_STATUS="\033[32mğŸŸ¢ Executando\033[0m"
        else
            QWEN_STATUS="\033[31mğŸ”´ Parado\033[0m"
        fi

        if pgrep -f "gemini-cli" >/dev/null; then
            GEMINI_STATUS="\033[32mğŸŸ¢ Executando\033[0m"
        else
            GEMINI_STATUS="\033[31mğŸ”´ Parado\033[0m"
        fi

        if pgrep -f "copilot-cli" >/dev/null; then
            COPILOT_STATUS="\033[32mğŸŸ¢ Executando\033[0m"
        else
            COPILOT_STATUS="\033[31mğŸ”´ Parado\033[0m"
        fi

        if pgrep -f "kilocode" >/dev/null; then
            KILOCODE_STATUS="\033[32mğŸŸ¢ Executando\033[0m"
        else
            KILOCODE_STATUS="\033[31mğŸ”´ Parado\033[0m"
        fi

        if pgrep -f "proot.*archlinux" >/dev/null; then
            ARCH_STATUS="\033[32mğŸŸ¢ On\033[0m"
        else
            ARCH_STATUS="\033[31mğŸ”´ Off\033[0m"
        fi

        echo "     ğŸš€ Ambiente de Desenvolvimento DeiviTech ğŸš€"
        printf "+=============================================================+\n"
        printf "| ğŸ–¥ï¸ SERVIÃ‡OS:                | ğŸ“¡ REDE:                      |\n"
        printf "| ğŸ§ ArchLinux: %-18b | ğŸŒ IP: %-23s |\n" "$ARCH_STATUS" "$CURRENT_IP"
        printf "|                                                             |\n"
        printf "|                      ğŸ¤– AGENTES IA:                         |\n"
        printf "| ğŸ§  Qwen v0.2.1     %-18b | ğŸ’ Gemini v0.14.0    %-18b |\n" "$QWEN_STATUS" "$GEMINI_STATUS"
        printf "| âœˆï¸ Copilot v0.1.36  %-18b | ğŸ§¬ Kilocode v0.2.0   %-18b |\n" "$COPILOT_STATUS" "$KILOCODE_STATUS"
        printf "|                                                             |\n"
        printf "|                      ğŸ’» LINGUAGENS:                         |\n"
        printf "| ğŸŸ¨ Node: %-11s | ğŸ Python: %-11s | â˜• Java: %-11s |\n" "24.9.0" "3.12.12" "21.0.9"
        printf "| ğŸ”µ Go: %-13s | ğŸ”» Rust: %-13s |                       |\n" "1.25.3" "1.91.0"
        printf "+=============================================================+\n"
        export DEIVITECH_EXIBIDO=1
    fi
}

exibir_deivitech

PROMPT="ğŸ‘‰ "

alias status="unset DEIVITECH_EXIBIDO && clear && source ~/.zshrc"
alias ..="cd .."
alias ...="cd ../.."
alias home="cd ~"
alias ll="ls -la"

qwen() {
  cd ~
  node /data/data/com.termux/files/usr/lib/node_modules/@qwen-code/qwen-code/cli.js "$@"
}

gemini() {
  cd ~
  node /data/data/com.termux/files/usr/lib/node_modules/@google/gemini-cli/dist/index.js "$@"
}

copilot() {
  cd ~
  if [ $# -eq 0 ]; then
    node /data/data/com.termux/files/usr/lib/node_modules/@githubnext/github-copilot-cli/cli.js chat
  else
    node /data/data/com.termux/files/usr/lib/node_modules/@githubnext/github-copilot-cli/cli.js "$@"
  fi
}

kilocode() {
  cd ~
  node /data/data/com.termux/files/usr/lib/node_modules/@kilocode/cli/index.js "$@"
}

if ! pgrep -x "sshd" > /dev/null; then
    sshd 2>/dev/null
fi

# ğŸ§¹ Limpeza fÃ¡cil
alias limpar="~/scripts/limpar.sh"
alias ls-home="ls -lhA ~ | grep -v ^total"

# ğŸ§ Arch Linux
alias arch="proot-distro login archlinux --user deivi"
